##################################################
# Filament Runout Alarm Macro using repeated M300
# ~10 minutes, 3-short → 2-long beep pattern
##################################################
[gcode_macro FILAMENT_RUNOUT]
description: Pause and beep repeatedly on filament runout
gcode:
    RESPOND TYPE=echo MSG="Filament runout detected! Insert filament and press RESUME."
    M117 Filament Runout Detected

    ; optional: turn on beeper pin if needed
    SET_PIN PIN=BEEPER_pin VALUE=1

    ; 10-minute 3-short → 2-long beep pattern
    M300 S1000 P150
    M300 S1000 P150
    M300 S1000 P150
    G4 P600
    M300 S1500 P150
    M300 S1500 P150
    G4 P5000

    M300 S1000 P150
    M300 S1000 P150
    M300 S1000 P150
    G4 P600
    M300 S1500 P150
    M300 S1500 P150
    G4 P5000

    M300 S1000 P150
    M300 S1000 P150
    M300 S1000 P150
    G4 P600
    M300 S1500 P150
    M300 S1500 P150
    G4 P5000

    M300 S1000 P150
    M300 S1000 P150
    M300 S1000 P150
    G4 P600
    M300 S1500 P150
    M300 S1500 P150
    G4 P5000

    M300 S1000 P150
    M300 S1000 P150
    M300 S1000 P150
    G4 P600
    M300 S1500 P150
    M300 S1500 P150
    G4 P5000

    M300 S1000 P150
    M300 S1000 P150
    M300 S1000 P150
    G4 P600
    M300 S1500 P150
    M300 S1500 P150
    G4 P5000

    M300 S1000 P150
    M300 S1000 P150
    M300 S1000 P150
    G4 P600
    M300 S1500 P150
    M300 S1500 P150
    G4 P5000

    M300 S1000 P150
    M300 S1000 P150
    M300 S1000 P150
    G4 P600
    M300 S1500 P150
    M300 S1500 P150
    G4 P5000

    M300 S1000 P150
    M300 S1000 P150
    M300 S1000 P150
    G4 P600
    M300 S1500 P150
    M300 S1500 P150
    G4 P5000

    M300 S1000 P150
    M300 S1000 P150
    M300 S1000 P150
    G4 P600
    M300 S1500 P150
    M300 S1500 P150
    G4 P5000
